let CACHE_NAME="schedule-v1",CACHE_TARGETS=["/","/index.html"];self.addEventListener("install",e=>{e.waitUntil(caches.open(CACHE_NAME).then(e=>e.addAll(CACHE_TARGETS)).then(()=>self.skipWaiting()))}),self.addEventListener("activate",e=>{e.waitUntil(caches.keys().then(e=>Promise.all(e.map(e=>{if(e!==CACHE_NAME)return caches.delete(e)}))).then(()=>self.clients.claim()))}),self.addEventListener("fetch",e=>{let t=e.request;"GET"===t.method&&new URL(t.url).origin===location.origin&&(t.url.includes("/api/")||e.respondWith(caches.match(t).then(e=>e||fetch(t).then(e=>{if(!e||200!==e.status)return e;let n=e.clone();return caches.open(CACHE_NAME).then(e=>e.put(t,n)),e}))))});